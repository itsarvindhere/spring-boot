After "Create" and "Read", the next operation is "Update" in our CRUD application.

There are basically three steps in updating an object - 

    1. Find the object using EntityManager
    2. Update its one or more field values
    3. Update the object using EntityManager

We already know how we can find an object using the EntityManager and we even saw some cases where we can write custom queries to find specific objects.

The most basic way to find any object is using its primary key and using the "find" method of EntityManager.

    Student student = entityManager.find(Student.class, 1);

Once we have the object, we can then use one of the setter methods of the Entity class to set/update the value of any field.

For example, maybe we want to update the first name. So we can write - 

    student.setFirstName("Scooby");

And finally, once we have made the required updates, we will use the "merge" method of the EntityManager to update the object.

# UPDATING MULTIPLE OBJECTS

Can we update more than one objects at once? Because in case of databases, we know that we can write UPDATE statements to update multiple rows.

Well, we can indeed do the same in JPA.

We will again use the "createQuery" method to write an "UPDATE" query. But, unlike the previous sections, we will also use another method with this named "executeUpdate()".

So, let's say we want to update the last name of all the students. We will write - 

    entityManager.createQuery("UPDATE Student SET lastName='Test'").executeUpdate();

When we run this, what this will give us back is the number of rows that are updated.

# LET'S CODE

Now, let's implement what we learned in the code.


## STEP 1 - ADD A NEW METHOD TO THE DAO INTERFACE

First, we add a new "update" method to the StudentDAO interface - 

    public interface StudentDAO {
        void save(Student student);
        Student findById(Integer id);
        List<Student> findAll();
        List<Student> findByLastName(String lastName);
        void update(Student student); <- THIS ONE
    }

# STEP 2 - IMPLEMENT THE METHOD IN THE IMPL CLASS

Next, since our DAOImpl class implements the DAO interface, we have to implement this "update" method.

    @Override
    @Transactional
    public void update(Student student) {
        entityManager.merge(student);
    }

Note that we are using @Transactional annotation on this method because remember that we are doing an update here. So, this should be done as a part of a transaction and the changes should only be committed if the transaction succeeds.

# STEP 3 - UPDATING THE MAIN CLASS

Finally, it's time to use this newly added method in our main class.

So, let's find a student with a specific id and then update the last name.

    @Override
	public void run(String... args) throws Exception {

		Student student = studentDAO.findById(5);

		System.out.println("Before update, the student is: " + student);

		student.setLastName("Test");
		studentDAO.update(student);

		System.out.println("After update, the student is: " + student);

	}

And to verify that the update indeed happened, we can check the table using the MySQL Workbench.